# üéØ .env File Setup - Complete Guide

## What You Need

I've created several resources to help you set up your `.env` file:

### üìÑ Files You Have:

1. **[.env.template](computer:///mnt/user-data/outputs/.env.template)** - Copy this as your starting point
2. **[ENV_QUICK_SETUP.md](computer:///mnt/user-data/outputs/ENV_QUICK_SETUP.md)** - Fast checklist (recommended!)
3. **[ENV_SETUP_GUIDE.md](computer:///mnt/user-data/outputs/ENV_SETUP_GUIDE.md)** - Detailed explanations
4. **[generate_keys.py](computer:///mnt/user-data/outputs/generate_keys.py)** - Script to generate secret keys

---

## ‚ö° Fastest Path (5 Minutes)

### 1. Generate Your Keys

Download and run `generate_keys.py`:

```bash
cd portfolio-backend
python ../generate_keys.py
```

You'll get output like:
```
SECRET_KEY: a1b2c3d4e5f6...
SETUP_KEY: xYz123Abc456...
```

**Copy these values** - you'll need them next.

### 2. Create Your .env File

Download `.env.template` and save it as `portfolio-backend/.env`, then edit it:

**Option A: Testing (No Email)**
```env
MONGODB_URI=mongodb://admin:password@mongodb:27017/portfolio?authSource=admin
FLASK_ENV=development
SECRET_KEY=<paste-your-generated-key>
MAIL_SERVER=smtp.gmail.com
MAIL_PORT=587
MAIL_USE_TLS=True
MAIL_USERNAME=test@example.com
MAIL_PASSWORD=test
MAIL_DEFAULT_SENDER=test@example.com
ADMIN_EMAIL=test@example.com
FRONTEND_URL=http://localhost:3000
SETUP_KEY=<paste-your-generated-key>
MONGO_USERNAME=admin
MONGO_PASSWORD=password
```

**Option B: Production (With Email)**
```env
MONGODB_URI=mongodb://admin:password@mongodb:27017/portfolio?authSource=admin
FLASK_ENV=development
SECRET_KEY=<paste-your-generated-key>
MAIL_SERVER=smtp.gmail.com
MAIL_PORT=587
MAIL_USE_TLS=True
MAIL_USERNAME=your-actual-email@gmail.com
MAIL_PASSWORD=<your-gmail-app-password>
MAIL_DEFAULT_SENDER=your-actual-email@gmail.com
ADMIN_EMAIL=your-actual-email@gmail.com
FRONTEND_URL=http://localhost:3000
SETUP_KEY=<paste-your-generated-key>
MONGO_USERNAME=admin
MONGO_PASSWORD=password
```

### 3. Get Gmail App Password (Only for Option B)

1. Go to: https://myaccount.google.com/apppasswords
2. Generate password for "Mail"
3. Copy the 16-character code (remove spaces)
4. Paste into MAIL_PASSWORD

### 4. Test It

```bash
cd portfolio-backend
python app_enhanced.py
```

If you see this, you're good! ‚úÖ
```
üöÄ Starting Enhanced Portfolio Backend API
Environment: development
Database: healthy
```

---

## üìã Field-by-Field Breakdown

### Required Fields (Must fill in):

| Field | What It Is | Example Value |
|-------|-----------|---------------|
| `MONGODB_URI` | Database connection | `mongodb://admin:password@mongodb:27017/portfolio?authSource=admin` |
| `SECRET_KEY` | JWT signing key | Generated by `generate_keys.py` |
| `SETUP_KEY` | Admin creation key | Generated by `generate_keys.py` |

### Optional Fields (For email functionality):

| Field | What It Is | Example Value |
|-------|-----------|---------------|
| `MAIL_USERNAME` | Your Gmail address | `yourname@gmail.com` |
| `MAIL_PASSWORD` | Gmail App Password | `abcdefghijklmnop` (16 chars) |
| `ADMIN_EMAIL` | Where to send contact forms | `yourname@gmail.com` |

### Auto-Configured (Leave as-is):

| Field | Value |
|-------|-------|
| `FLASK_ENV` | `development` |
| `MAIL_SERVER` | `smtp.gmail.com` |
| `MAIL_PORT` | `587` |
| `MAIL_USE_TLS` | `True` |
| `FRONTEND_URL` | `http://localhost:3000` |
| `MONGO_USERNAME` | `admin` |
| `MONGO_PASSWORD` | `password` |

---

## üîë How to Get Each Value

### SECRET_KEY & SETUP_KEY
‚úÖ **Use the generate_keys.py script** (recommended)
```bash
python generate_keys.py
```

OR manually:
```bash
python -c "import secrets; print('SECRET_KEY:', secrets.token_hex(32))"
python -c "import secrets; print('SETUP_KEY:', secrets.token_urlsafe(32))"
```

### MONGODB_URI

**For Docker (recommended):**
```env
MONGODB_URI=mongodb://admin:password@mongodb:27017/portfolio?authSource=admin
```

**For MongoDB Atlas (cloud):**
1. Sign up at https://www.mongodb.com/cloud/atlas
2. Create free cluster
3. Get connection string
4. Replace `<username>` and `<password>`
```env
MONGODB_URI=mongodb+srv://user:pass@cluster.mongodb.net/portfolio?retryWrites=true&w=majority
```

### Gmail App Password

**Only if you want email notifications:**

1. Enable 2FA: https://myaccount.google.com/security
2. Generate app password: https://myaccount.google.com/apppasswords
3. Copy 16-character code (no spaces)
4. Use in `MAIL_PASSWORD`

---

## ‚úÖ Verification Checklist

Before running your app, verify:

- [ ] File is named exactly `.env` (not `.env.txt`)
- [ ] File is in `portfolio-backend/` folder
- [ ] `SECRET_KEY` is 64 characters long
- [ ] `SETUP_KEY` has random letters/numbers
- [ ] No placeholder text (no "your-email", "change-this")
- [ ] If using Gmail: password is 16 characters (app password, not regular)
- [ ] `MONGODB_URI` starts with `mongodb://` or `mongodb+srv://`

---

## üöÄ Next Steps After .env

Once your `.env` is ready:

### Option 1: Use Docker (Recommended)
```bash
# From project root
docker-compose up -d
```

### Option 2: Manual Setup
```bash
# Backend
cd portfolio-backend
python -m venv venv
source venv/bin/activate  # Windows: venv\Scripts\activate
pip install -r requirements.txt
python app_enhanced.py

# Frontend (new terminal)
cd frontend
npm install
npm run dev
```

### Create Admin User
```bash
cd portfolio-backend
flask create-admin
# Enter username and password when prompted
```

### Access Your App
- Frontend: http://localhost:3000
- Backend API: http://localhost:5000
- API Health: http://localhost:5000/health

---

## üêõ Troubleshooting

### "ModuleNotFoundError"
```bash
cd portfolio-backend
source venv/bin/activate
pip install -r requirements.txt
```

### "Can't connect to MongoDB"
```bash
# Check if MongoDB is running
docker-compose ps

# Start MongoDB
docker-compose up -d mongodb

# Check logs
docker-compose logs mongodb
```

### "Email not sending"
**Option 1:** Use test config (emails won't send but app works)
```env
MAIL_USERNAME=test@example.com
MAIL_PASSWORD=test
```

**Option 2:** Fix Gmail setup
- Use App Password (not regular password)
- Remove spaces from 16-character code
- Enable 2FA first

### "Invalid SECRET_KEY"
**Must be at least 32 characters.** Use `generate_keys.py` to create one.

---

## üí° Pro Tips

1. **Never commit .env to Git** - Already in .gitignore ‚úÖ
2. **Use different keys for dev/production** - Generate new keys for each
3. **Keep .env.example updated** - When adding new variables
4. **Use Docker for simplicity** - Includes MongoDB automatically
5. **Test without email first** - Use test credentials to verify app works

---

## üìû Need More Help?

- **Quick setup**: [ENV_QUICK_SETUP.md](computer:///mnt/user-data/outputs/ENV_QUICK_SETUP.md)
- **Detailed guide**: [ENV_SETUP_GUIDE.md](computer:///mnt/user-data/outputs/ENV_SETUP_GUIDE.md)
- **Template file**: [.env.template](computer:///mnt/user-data/outputs/.env.template)
- **Key generator**: [generate_keys.py](computer:///mnt/user-data/outputs/generate_keys.py)

---

## üéâ Summary

1. ‚úÖ Download `generate_keys.py` and run it
2. ‚úÖ Download `.env.template` 
3. ‚úÖ Save as `portfolio-backend/.env`
4. ‚úÖ Fill in the generated keys
5. ‚úÖ Add Gmail credentials (or use test values)
6. ‚úÖ Run `docker-compose up -d`

**You're ready to go!** üöÄ****